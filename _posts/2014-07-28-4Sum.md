---
layout: post
title: 4Sum
date: 2014-07-28 15:52:16
disqus: y
---

## 题意：
给一个n个元素的数组，求满足四个元素和为0的序列

## 要求：


## 思路：
同3Sum，O(n^3)
python的解法参照网上的hash的方法
先排序
然后建立一个dictionary，dic[temp]=[(i,j)满足num[i]+num[j]=temp],O(n^2)
然后搜索是否含有target-num[i]-num[j]
最终结果保存到一个set()中，用于去重
## 代码：

### C++:

{% highlight c++ %}
class Solution {
public:
    vector<vector<int> > fourSum(vector<int> &num, int target) {
        sort(num.begin(),num.end());
        vector<vector<int> >ans;
        vector<int>ret;
        int n=num.size();
        for(int i=0;i<n;i++)
        {
            if(i>0&&num[i]==num[i-1])
            {
                continue;
            }
            for(int j=n-1;j>i;j--)
            {
                if(j<n-1&&num[j]==num[j+1])
                {
                    continue;
                }
                int start=i+1;
                int end=j-1;
                while(start<end)
                {
                    if(start>i+1&&num[start]==num[start-1])
                    {
                        start++;
                        continue;
                    }
                    if(end<j-1&&num[end]==num[end+1])
                    {
                        end--;
                        continue;
                    }
                    int temp=num[i]+num[start]+num[end]+num[j];
                    if(temp==target)
                    {
                        ret.clear();
                        ret.push_back(num[i]);
                        ret.push_back(num[start]);
                        ret.push_back(num[end]);
                        ret.push_back(num[j]);
                        ans.push_back(ret);
                        start++;
                    }
                    else if(temp<target)
                    {
                        start++;
                    }
                    else
                    {
                        end--;
                    }
                }
            }
        }
        return ans;
    }
};


 {% endhighlight %}
### python:

{% highlight python %}

class Solution:
    # @return a list of lists of length 4, [[val1,val2,val3,val4]]
    def fourSum(self, num, target):
        n=len(num)
        ans=set()
        dic={}
        num.sort()
        for i in range(n):
            for j in range(i+1,n):
                if num[i]+num[j] not in dic:
                    dic[num[i]+num[j]]=[(i,j)]
                else:
                    dic[num[i]+num[j]].append((i,j))
        for i in range(n):
            for j in range(i+1,n-2):
                temp=target-num[i]-num[j]
                if temp in dic:
                    for k in dic[temp]:
                        if k[0]>j:
                            ans.add((num[i],num[j],num[k[0]],num[k[1]]))
        return [list(i) for i in ans]
 {% endhighlight %}
